// GENERATED BY UNITY - REMOVE THIS COMMENT TO PREVENT OVERWRITING WHEN EXPORTING AGAIN

plugins {
    // If you are changing the Android Gradle Plugin version, make sure it is compatible with the Gradle version preinstalled with Unity
    // See which Gradle version is preinstalled with Unity here https://docs.unity3d.com/Manual/android-gradle-overview.html
    // See official Gradle and Android Gradle Plugin compatibility table here https://developer.android.com/studio/releases/gradle-plugin#updating-gradle
    // To specify a custom Gradle version in Unity, go do "Preferences > External Tools", uncheck "Gradle Installed with Unity (recommended)" and specify a path to a custom Gradle version
    id 'com.android.application' version '8.7.2' apply false
    id 'com.android.library' version '8.7.2' apply false
    **BUILD_SCRIPT_DEPS**
}

allprojects {
    repositories {**ARTIFACTORYREPOSITORY**
        google()
        mavenCentral()
        flatDir {
            dirs "${project(':unityLibrary').projectDir}/libs"
        }
    }
    
    // Force resolve AndroidX dependency conflicts - applies to ALL projects and modules
    configurations.all {
        resolutionStrategy {
            // Force specific versions to avoid conflicts
            force 'androidx.core:core:1.9.0'
            force 'androidx.arch.core:core-common:2.2.0'
            force 'androidx.collection:collection:1.2.0'
            force 'androidx.concurrent:concurrent-futures:1.1.0'
            force 'androidx.lifecycle:lifecycle-runtime:2.6.0'
            
            // Ensure all sub-dependencies use compatible versions
            eachDependency { DependencyResolveDetails details ->
                if (details.requested.group == 'androidx.core' && details.requested.name == 'core') {
                    details.useVersion '1.9.0'
                    details.because 'Resolve duplicate class conflicts'
                }
                if (details.requested.group == 'androidx.arch.core' && details.requested.name == 'core-common') {
                    details.useVersion '2.2.0'
                    details.because 'Resolve duplicate class conflicts'
                }
                if (details.requested.group == 'androidx.collection' && details.requested.name == 'collection') {
                    details.useVersion '1.2.0'
                    details.because 'Resolve duplicate class conflicts'
                }
                if (details.requested.group == 'androidx.concurrent' && details.requested.name == 'concurrent-futures') {
                    details.useVersion '1.1.0'
                    details.because 'Resolve duplicate class conflicts'
                }
                if (details.requested.group == 'androidx.lifecycle' && details.requested.name == 'lifecycle-runtime') {
                    details.useVersion '2.6.0'
                    details.because 'Resolve duplicate class conflicts'
                }
            }
        }
    }
}

// Disable duplicate class check for bundled AAR conflicts - applies to ALL tasks
tasks.whenTaskAdded { task ->
    if (task.name.contains('checkDuplicateClasses')) {
        task.enabled = false
    }
}

tasks.register('clean', Delete) {
    delete rootProject.layout.buildDirectory
}
